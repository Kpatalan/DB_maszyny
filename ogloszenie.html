<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <title>Dane z webhooka n8n</title>
  <style>
    body { font-family:sans-serif; background:#f4f4f4; padding:2rem; }
    h1   { margin-bottom:2rem; }
    .block{background:#fff; padding:1rem; margin-bottom:2rem;
           border:1px solid #ccc; border-radius:8px;}
    label{display:block; font-weight:bold; margin-bottom:0.5rem;}
    textarea{width:100%; height:120px; font-family:monospace; font-size:1rem;
             padding:0.5rem; border:1px solid #aaa; border-radius:4px;
             background:#f9f9f9;}
    button.copy-btn{margin-top:0.5rem; padding:6px 12px; background:#0077cc;
                    color:#fff; border:none; border-radius:4px; cursor:pointer;}
    button.copy-btn:hover{background:#005fa3;}
  </style>
</head>
<body>

<h1>Dane z webhooka (n8n)</h1>

<div class="block">
  <label for="title">Tytuł ogłoszenia</label>
  <textarea id="title" readonly></textarea>
  <button class="copy-btn" onclick="copyToClipboard('title')">Kliknij, aby skopiować</button>
</div>

<div class="block">
  <label for="body">Treść ogłoszenia</label>
  <textarea id="body" readonly></textarea>
  <button class="copy-btn" onclick="copyToClipboard('body')">Kliknij, aby skopiować</button>
</div>

<div class="block">
  <label for="spec">Specyfikacja</label>
  <textarea id="spec" readonly></textarea>
  <button class="copy-btn" onclick="copyToClipboard('spec')">Kliknij, aby skopiować</button>
</div>

<div class="block">
  <label for="use">Zastosowanie</label>
  <textarea id="use" readonly></textarea>
  <button class="copy-btn" onclick="copyToClipboard('use')">Kliknij, aby skopiować</button>
</div>

<div class="block">
  <label for="info">Informacje dodatkowe</label>
  <textarea id="info" readonly></textarea>
  <button class="copy-btn" onclick="copyToClipboard('info')">Kliknij, aby skopiować</button>
</div>

<div class="block">
  <label for="kontakt">Kontakt (HTML)</label>
  <textarea id="kontakt" readonly></textarea>
  <button class="copy-btn" onclick="copyToClipboard('kontakt')">Kliknij, aby skopiować</button>
</div>

<script>
/* ---------- kopiowanie ---------- */
function copyToClipboard(id){
  const ta=document.getElementById(id);
  ta.select(); document.execCommand('copy');
  const btn=ta.nextElementSibling;
  const t=btn.textContent;
  btn.textContent='Skopiowano!';
  setTimeout(()=>btn.textContent=t,1500);
}

/* ---------- pobieranie danych ---------- */
/*
   Jeśli pozostajesz przy modelu:
   Webhook (POST) -> OpenAI -> Respond to Webhook
   …i chcesz odebrać dane GET-em, dodaj w n8n dodatkowy webhook typu GET,
   który zwraca „ostatni wygenerowany JSON”. W prostych testach możesz
   wywołać POST bezpośrednio z JS (fetchOptions.method='POST').
*/
const fetchOptions = { method:'GET' };          // zmień na POST, jeśli trzeba
const ENDPOINT     = 'https://TWÓJ_HOST/webhook-test/ogloszenie'; // ← URL

async function loadData(){
  try{
    const r = await fetch(ENDPOINT, fetchOptions);
    const data = await r.json();               // {title, body, …}

    document.getElementById('title'   ).value = data.title   || '';
    document.getElementById('body'    ).value = data.body    || '';
    document.getElementById('spec'    ).value = data.specyfikacja || '';
    document.getElementById('use'     ).value = data.zastosowanie  || '';
    document.getElementById('info'    ).value = data.info    || '';
    document.getElementById('kontakt' ).value = data.kontakt || '';
  }catch(e){
    alert('Błąd pobierania danych z webhooka: '+e);
  }
}

/* inicjalizacja */
loadData();
</script>
</body>
</html>

